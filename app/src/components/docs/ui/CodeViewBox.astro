---
import type { SupportedLanguage } from "@/types/index";
import CopyBtnCode from "@components/vuejs/CopyBtnCode.vue";
import CustomCodeBlock from "@components/vuejs/CustomCodeBlock.vue";

type Props = {
    code: string;
    lang: SupportedLanguage;
    class?: string;
    unstilled?: boolean;
};

const { code, lang, unstilled, class: className = "" } = Astro.props;
---

<div
    data-pagefind-ignore
    data-code-component
    data-code-block
    data-code-box-collapsible
    class={`${unstilled ? "" : "relative group overflow-hidden max-h-35rem wfull grid b b-border-strong/30 rd-lg bg-[--astro-code-color-background]"} ${className}`}
>
    <CopyBtnCode
        className="absolute top-2 right-2 z40 invisible flex op0 group-hover-visible group-hover-op100 text-gray300"
        client:load
    />
    <div
        class="wfull flex hfull overflow-auto"
    >
        <CustomCodeBlock code={code} lang={lang} client:load />
    </div>
</div>
